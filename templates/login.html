{% extends "base.html" %}
{% block title %}Login{% endblock %}
{% load static %}
{% block nav %}{% endblock %}

{% block content %}
<style>
  :root{
  --g1: #004182;
  --g2: #054585d0;
}
  .center{
    min-height: calc(100vh - 120px);
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding: 22px 14px 40px;
    box-sizing:border-box;
  }

  .glass-card{
    width: min(560px, 100%);
    margin-top: 10px;
    background: rgba(40,40,40,.40);
    border: 1px solid rgba(255,255,255,.18);
    border-radius: 18px;
    padding: 18px;
    backdrop-filter: blur(14px);
    box-shadow: 0 18px 50px rgba(0,0,0,.45);
    animation: zoomIn .35s ease-out both;
  }

  @keyframes zoomIn{
    from{ transform: translateY(6px) scale(.97); opacity:0; }
    to{ transform: translateY(0) scale(1); opacity:1; }
  }

  /* ✅ Silver running title */
  .title{
    text-align:center;
    font-size: 20px;
    font-weight: 950;
    letter-spacing: .6px;
    margin: 6px 0 14px;
    background: linear-gradient(90deg, rgba(255,255,255,.35), rgba(255,255,255,.95), rgba(255,255,255,.35));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    background-size: 220% 100%;
    animation: shimmer 2.2s linear infinite;
  }
  @keyframes shimmer{
    0%{ background-position: 0% 50%; }
    100%{ background-position: 200% 50%; }
  }

  .field{ margin: 12px 0; }
  .label{
    font-size: 13px;
    font-weight: 800;
    opacity: .92;
    margin: 0 0 8px;
  }

  .input-wrap{
    display:flex;
    align-items:center;
    gap:10px;
    padding: 10px 12px;
    border-radius: 14px;
    background: rgba(255,255,255,.92);
    border: 1px solid rgba(255,255,255,.35);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.65);
    box-sizing:border-box;
  }


  .icon-box svg{
    width:18px;
    height:18px;
    fill:#054585d0;
    opacity:.95;
  }

  .input{
    width:100%;
    border:none;
    outline:none;
    background:transparent;
    font-size:14px;

    /* ✅ FIX: typed text color */
    color:#111;
    caret-color:#111;
  }

  /* ✅ FIX: placeholder color */
  .input::placeholder{
    color:#888;
    opacity:1;
  }

  /* ✅ FIX: Chrome autofill keeps text black */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus{
    -webkit-text-fill-color:#111 !important;
    box-shadow: 0 0 0px 1000px rgba(255,255,255,.92) inset !important;
    transition: background-color 9999s ease-in-out 0s;
  }

  .eye-btn{
    border:none;
    background:transparent;
    cursor:pointer;
    width:34px;
    height:34px;
    border-radius: 11px;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .eye-btn:hover{ background: rgba(0,0,0,.06); }
  .eye-btn svg{
    width:18px;
    height:18px;
    fill:#054585d0;
    opacity:.9;
  }

  .btn{
    width:100%;
    height:46px;
    border:none;
    border-radius:999px;
    margin-top: 10px;
    background: linear-gradient(90deg,var(--g1),var(--g2));
    color:#fff;
    font-weight: 950;
    letter-spacing:.4px;
    box-shadow: 0 14px 28px rgba(0,0,0,.40);
    cursor:pointer;
  }

  .foot{
    text-align:center;
    margin-top: 10px;
    font-size: 13px;
    opacity: .92;
  }
  .foot a{
    color:#59acffe8;
    font-weight: 900;
    text-decoration:none;
  }
  .foot a:hover{ text-decoration: underline; }

  .err{
    margin: 10px 0 0;
    background: rgba(255, 0, 0, .14);
    border: 1px solid rgba(255, 0, 0, .25);
    color:#ffecec;
    padding: 10px 12px;
    border-radius: 12px;
    font-size: 13px;
  }

  @media (max-width:480px){
    .glass-card{ padding:16px; border-radius:16px; }
    .btn{ height:46px; }
  }

  @font-face {
  font-family: 'Ovelion';
  src: url("{% static 'fonts/Ovelion-Regular.ttf' %}") format('truetype');
}

body, body * {
  font-family: 'Ovelion', sans-serif !important;
}
</style>

<div class="center">
  <div class="glass-card">

    <div class="title">Login</div>

    <!-- ✅ Professional alert (Django messages) -->
    {% if messages %}
      {% for message in messages %}
        <div class="err"><strong>Login failed:</strong> {{ message }}</div>
      {% endfor %}
    {% endif %}

    {% if form.errors %}
      <div class="err"><strong>Login failed:</strong> Phone or password incorrect. Please try again.</div>
    {% endif %}

    <form method="post" autocomplete="off">
      {% csrf_token %}

      <div class="field">
        <div class="label">Phone Number</div>
        <div class="input-wrap">
          <div class="icon-box" aria-hidden="true">
            <!-- phone -->
            <svg viewBox="0 0 24 24">
              <path d="M6.6 10.8c1.8 3.6 3.9 5.7 7.5 7.5l2.5-2.5c.3-.3.7-.4 1.1-.3 1.2.4 2.6.7 4 .7.6 0 1 .4 1 1V21c0 .6-.4 1-1 1C10.6 22 2 13.4 2 2c0-.6.4-1 1-1h3.1c.6 0 1 .4 1 1 0 1.4.2 2.8.7 4 .1.4 0 .8-.3 1.1L6.6 10.8z"/>
            </svg>
          </div>
          <input class="input" type="text" name="phone" placeholder="Phone number" required>
        </div>
      </div>

      <div class="field">
        <div class="label">Password</div>
        <div class="input-wrap">
          <div class="icon-box" aria-hidden="true">
            <!-- lock -->
            <svg viewBox="0 0 24 24">
              <path d="M12 1a5 5 0 00-5 5v3H6a2 2 0 00-2 2v9a2 2 0 002 2h12a2 2 0 002-2v-9a2 2 0 00-2-2h-1V6a5 5 0 00-5-5zm-3 8V6a3 3 0 016 0v3H9z"/>
            </svg>
          </div>

          <input id="pwd" class="input" type="password" name="password" placeholder="Password" required>

          <button type="button" class="eye-btn" id="togglePwd" aria-label="Show password">
            <!-- eye -->
            <svg viewBox="0 0 24 24">
              <path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 110-10 5 5 0 010 10z"/>
            </svg>
          </button>
        </div>
      </div>

      <button class="btn" type="submit">→ LOGIN</button>

      <div class="foot">
        No account? <a href="/register/">Register</a>
      </div>
    </form>

  </div>
</div>

<script>
  (function(){
    const pwd = document.getElementById("pwd");
    const btn = document.getElementById("togglePwd");
    btn.addEventListener("click", () => {
      pwd.type = (pwd.type === "password") ? "text" : "password";
    });
  })();
</script>
{% endblock %}
